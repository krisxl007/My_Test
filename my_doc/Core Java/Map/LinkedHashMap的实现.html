<!DOCTYPE html>
<!-- saved from url=(0063)http://www.cnblogs.com/children/archive/2012/10/02/2710624.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<title>理解LinkedHashMap - children - 博客园</title>
<link type="text/css" rel="stylesheet" href="./理解LinkedHashMap - children - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./理解LinkedHashMap - children - 博客园_files/bundle-SimpleBlue.css">
<link id="mobile-style" media="only screen and (max-width: 768px)" type="text/css" rel="stylesheet" href="./理解LinkedHashMap - children - 博客园_files/bundle-SimpleBlue-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/children/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/children/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/children/wlwmanifest.xml">
<script src="./理解LinkedHashMap - children - 博客园_files/jquery.js.download" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'children', cb_enable_mathjax=false;var isLogined=false;</script>
<script src="./理解LinkedHashMap - children - 博客园_files/blog-common.js.download" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<div id="home">
<div id="header">
	<div id="blogTitle">
		
<!--done-->
<div class="title"><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/children/">children</a></div>
<div class="subtitle"></div>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li id="nav_sitehome"></li>
<li id="nav_myhome"><a id="blog_nav_myhome" class="menu" href="http://www.cnblogs.com/children/">首页</a></li>
<li id="nav_newpost"><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li id="nav_contact"></li>
<li id="nav_rss">
<!----></li>
<li id="nav_admin"><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>

		<div class="blogStats">
			
			<div id="blog_stats">
<!--done-->
随笔-107&nbsp;
文章-0&nbsp;
评论-3&nbsp;
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html">理解LinkedHashMap</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><p>转自<a href="http://uule.iteye.com/blog/1522291">http://uule.iteye.com/blog/1522291</a></p>
<p>&nbsp;</p>
<div class="blog_title">
<div class="news_tag">&nbsp;</div>
</div>
<div id="blog_content" class="blog_content">
<p><br><iframe id="iframe_0.6486651678544211" src="./理解LinkedHashMap - children - 博客园_files/saved_resource.html" style="border: none; width: 488px; height: 376px;" frameborder="0" scrolling="no"></iframe></p>
<p><span>1. LinkedHashMap概述：</span></p>
<p>LinkedHashMap是HashMap的一个子类，它<span><strong>保留插入的顺序</strong></span>，如果需要输出的顺序和输入时的相同，那么就选用LinkedHashMap。</p>
<p>&nbsp;&nbsp; LinkedHashMap是Map接口的哈希表和链接列表实现，具有可预知的迭代顺序。此实现提供所有可选的映射操作，并<strong><span>允许使用null值和null键</span></strong>。此类不保证映射的顺序，特别是它<strong><span>不保证该顺序恒久不变</span></strong>。<br>&nbsp;&nbsp; LinkedHashMap实现与HashMap的不同之处在于，后者维护着一个运行于所有条目的双重链接列表。此链接列表定义了迭代顺序，该迭代顺序可以是插入顺序或者是访问顺序。<br>&nbsp;&nbsp; 注意，此实现不是同步的。如果多个线程同时访问链接的哈希映射，而其中至少一个线程从结构上修改了该映射，则它必须保持外部同步。</p>
<p>&nbsp;</p>
<p>根据链表中元素的顺序可以分为：<strong><span>按插入顺序的链表，和按访问顺序(调用get方法)的链表。</span></strong>&nbsp;&nbsp;</p>
<p>默认是按插入顺序排序，如果指定按访问顺序排序，那么调用get方法后，会将这次访问的元素移至链表尾部，不断访问可以形成按访问顺序排序的链表。 &nbsp;可以重写removeEldestEntry方法返回true值指定插入元素时移除最老的元素。&nbsp;</p>
<p>&nbsp;</p>
<p><span>2. LinkedHashMap的实现：</span></p>
<p>&nbsp;&nbsp; 对于LinkedHashMap而言，它继承与HashMap、底层使用哈希表与双向链表来保存所有元素。其基本操作与父类HashMap相似，它通过重写父类相关的方法，来实现自己的链接列表特性。下面我们来分析LinkedHashMap的源代码：</p>
<p><span><strong>类结构：</strong></span></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=public%20class%20LinkedHashMap%3CK%2C%20V%3E%20extends%20HashMap%3CK%2C%20V%3E%20implements%20Map%3CK%2C%20V%3E%20%20"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.44238459033433486" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(1).html" style="border: none; width: 15px; height: 14px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;LinkedHashMap&lt;K,&nbsp;V&gt;&nbsp;<span class="keyword">extends</span>&nbsp;HashMap&lt;K,&nbsp;V&gt;&nbsp;<span class="keyword">implements</span>&nbsp;Map&lt;K,&nbsp;V&gt;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;</p>
<p><span>&nbsp;<span>1) 成员变量：</span></span></p>
<p>&nbsp;&nbsp; LinkedHashMap采用的hash算法和HashMap相同，但是它重新定义了数组中保存的元素Entry，该Entry除了保存当前对象的引用外，还保存了其上一个元素before和下一个元素after的引用，从而在哈希表的基础上又构成了双向链接列表。看源代码：</p>
<p>&nbsp;</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=%2F%2Ftrue%E8%A1%A8%E7%A4%BA%E6%8C%89%E7%85%A7%E8%AE%BF%E9%97%AE%E9%A1%BA%E5%BA%8F%E8%BF%AD%E4%BB%A3%EF%BC%8Cfalse%E6%97%B6%E8%A1%A8%E7%A4%BA%E6%8C%89%E7%85%A7%E6%8F%92%E5%85%A5%E9%A1%BA%E5%BA%8F%0A%20private%20final%20boolean%20accessOrder%3B"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.549833787569826" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(2).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="comment">//true表示按照访问顺序迭代，false时表示按照插入顺序</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;<span class="keyword">private</span>&nbsp;<span class="keyword">final</span>&nbsp;<span class="keyword">boolean</span>&nbsp;accessOrder;&nbsp;&nbsp;</span></li>

</ol></div>
<div class="dp-highlighter"><ol class="dp-j">
<li><span><span class="comment">/**</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*&nbsp;双向链表的表头元素。</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li><span><span class="keyword">private</span>&nbsp;<span class="keyword">transient</span>&nbsp;Entry&lt;K,V&gt;&nbsp;header;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span><span class="comment">/**</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*&nbsp;LinkedHashMap的Entry元素。</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*&nbsp;继承HashMap的Entry元素，又保存了其上一个元素before和下一个元素after的引用。</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li><span><span class="keyword">private</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">class</span>&nbsp;Entry&lt;K,V&gt;&nbsp;<span class="keyword">extends</span>&nbsp;HashMap.Entry&lt;K,V&gt;&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;K,V&gt;&nbsp;before,&nbsp;after;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;……&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>HashMap.Entry:</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=static%20class%20Entry%3CK%2CV%3E%20implements%20Map.Entry%3CK%2CV%3E%20%7B%0A%20%20%20%20%20%20%20%20final%20K%20key%3B%0A%20%20%20%20%20%20%20%20V%20value%3B%0A%20%20%20%20%20%20%20%20Entry%3CK%2CV%3E%20next%3B%0A%20%20%20%20%20%20%20%20final%20int%20hash%3B%0A%0A%20%20%20%20%20%20%20%20Entry(int%20h%2C%20K%20k%2C%20V%20v%2C%20Entry%3CK%2CV%3E%20n)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20next%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20k%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20hash%20%3D%20h%3B%0A%20%20%20%20%20%20%20%20%7D%0A%7D"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.7235164822181432" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(3).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="keyword">static</span>&nbsp;<span class="keyword">class</span>&nbsp;Entry&lt;K,V&gt;&nbsp;<span class="keyword">implements</span>&nbsp;Map.Entry&lt;K,V&gt;&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">final</span>&nbsp;K&nbsp;key;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V&nbsp;value;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;K,V&gt;&nbsp;next;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">final</span>&nbsp;<span class="keyword">int</span>&nbsp;hash;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entry(<span class="keyword">int</span>&nbsp;h,&nbsp;K&nbsp;k,&nbsp;V&nbsp;v,&nbsp;Entry&lt;K,V&gt;&nbsp;n)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;v;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next&nbsp;=&nbsp;n;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;k;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hash&nbsp;=&nbsp;h;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
&nbsp;&nbsp;
<p>&nbsp;&nbsp;&nbsp;<span>&nbsp;2) 初始化：</span></p>
<p>&nbsp;&nbsp; 通过源代码可以看出，在LinkedHashMap的构造方法中，实际调用了父类HashMap的相关构造方法来构造一个底层存放的table数组。如：</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">public</span>&nbsp;LinkedHashMap(<span class="keyword">int</span>&nbsp;initialCapacity,&nbsp;<span class="keyword">float</span>&nbsp;loadFactor)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">super</span>(initialCapacity,&nbsp;loadFactor);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;accessOrder&nbsp;=&nbsp;<span class="keyword">false</span>;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;&nbsp;&nbsp; HashMap中的相关构造方法：</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">public</span>&nbsp;HashMap(<span class="keyword">int</span>&nbsp;initialCapacity,&nbsp;<span class="keyword">float</span>&nbsp;loadFactor)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(initialCapacity&nbsp;&lt;&nbsp;<span class="number">0</span>)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">throw</span>&nbsp;<span class="keyword">new</span>&nbsp;IllegalArgumentException(<span class="string">"Illegal&nbsp;initial&nbsp;capacity:&nbsp;"</span>&nbsp;+&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initialCapacity);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(initialCapacity&nbsp;&gt;&nbsp;MAXIMUM_CAPACITY)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initialCapacity&nbsp;=&nbsp;MAXIMUM_CAPACITY;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(loadFactor&nbsp;&lt;=&nbsp;<span class="number">0</span>&nbsp;||&nbsp;Float.isNaN(loadFactor))&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">throw</span>&nbsp;<span class="keyword">new</span>&nbsp;IllegalArgumentException(<span class="string">"Illegal&nbsp;load&nbsp;factor:&nbsp;"</span>&nbsp;+&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadFactor);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Find&nbsp;a&nbsp;power&nbsp;of&nbsp;2&nbsp;&gt;=&nbsp;initialCapacity</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span>&nbsp;capacity&nbsp;=&nbsp;<span class="number">1</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">while</span>&nbsp;(capacity&nbsp;&lt;&nbsp;initialCapacity)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capacity&nbsp;&lt;&lt;=&nbsp;<span class="number">1</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.loadFactor&nbsp;=&nbsp;loadFactor;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;threshold&nbsp;=&nbsp;(<span class="keyword">int</span>)(capacity&nbsp;*&nbsp;loadFactor);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;Entry[capacity];&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;init();&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;&nbsp;&nbsp; 我们已经知道LinkedHashMap的Entry元素继承HashMap的Entry，提供了双向链表的功能。在上述HashMap的构造器中，最后会调用init()方法，进行相关的初始化，这个方法在HashMap的实现中并无意义，只是提供给子类实现相关的初始化调用。<br>&nbsp;&nbsp; LinkedHashMap重写了init()方法，在调用父类的构造方法完成构造后，进一步实现了对其元素Entry的初始化操作。</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">void</span>&nbsp;init()&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;header&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;Entry&lt;K,V&gt;(-<span class="number">1</span>,&nbsp;<span class="keyword">null</span>,&nbsp;<span class="keyword">null</span>,&nbsp;<span class="keyword">null</span>);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;header.before&nbsp;=&nbsp;header.after&nbsp;=&nbsp;header;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<span>3) 存储：</span></p>
<p>&nbsp;&nbsp;<span>&nbsp;LinkedHashMap并未重写父类HashMap的put方法，而是重写了父类HashMap的put方法调用的子方法void recordAccess</span><span>(HashMap m)</span><span>&nbsp;</span><span>&nbsp; ，void addEntry</span>(int hash, K key, V value, int bucketIndex) 和void createEntry(int hash, K key, V value, int bucketIndex)，提供了自己特有的双向链接列表的实现。</p>
<p><strong>HashMap.put:</strong></p>
<p>&nbsp;</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=public%20V%20put(K%20key%2C%20V%20value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(key%20%3D%3D%20null)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20putForNullKey(value)%3B%0A%20%20%20%20%20%20%20%20int%20hash%20%3D%20hash(key.hashCode())%3B%0A%20%20%20%20%20%20%20%20int%20i%20%3D%20indexFor(hash%2C%20table.length)%3B%0A%20%20%20%20%20%20%20%20for%20(Entry%3CK%2CV%3E%20e%20%3D%20table%5Bi%5D%3B%20e%20!%3D%20null%3B%20e%20%3D%20e.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Object%20k%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.hash%20%3D%3D%20hash%20%26%26%20((k%20%3D%20e.key)%20%3D%3D%20key%20%7C%7C%20key.equals(k)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20V%20oldValue%20%3D%20e.value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.value%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.recordAccess(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20oldValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20modCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20addEntry(hash%2C%20key%2C%20value%2C%20i)%3B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.7066466193776408" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(4).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="keyword">public</span>&nbsp;V&nbsp;put(K&nbsp;key,&nbsp;V&nbsp;value)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(key&nbsp;==&nbsp;<span class="keyword">null</span>)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;putForNullKey(value);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span>&nbsp;hash&nbsp;=&nbsp;hash(key.hashCode());&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span>&nbsp;i&nbsp;=&nbsp;indexFor(hash,&nbsp;table.length);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(Entry&lt;K,V&gt;&nbsp;e&nbsp;=&nbsp;table[i];&nbsp;e&nbsp;!=&nbsp;<span class="keyword">null</span>;&nbsp;e&nbsp;=&nbsp;e.next)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;k;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(e.hash&nbsp;==&nbsp;hash&nbsp;&amp;&amp;&nbsp;((k&nbsp;=&nbsp;e.key)&nbsp;==&nbsp;key&nbsp;||&nbsp;key.equals(k)))&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V&nbsp;oldValue&nbsp;=&nbsp;e.value;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.value&nbsp;=&nbsp;value;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.recordAccess(<span class="keyword">this</span>);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;oldValue;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modCount++;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addEntry(hash,&nbsp;key,&nbsp;value,&nbsp;i);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">null</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>

</ol></div>
<p><span>&nbsp;重写方法：</span></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=void%20recordAccess(HashMap%3CK%2CV%3E%20m)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20LinkedHashMap%3CK%2CV%3E%20lm%20%3D%20(LinkedHashMap%3CK%2CV%3E)m%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(lm.accessOrder)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lm.modCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20addBefore(lm.header)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.49430877319369926" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(5).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="keyword">void</span>&nbsp;recordAccess(HashMap&lt;K,V&gt;&nbsp;m)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LinkedHashMap&lt;K,V&gt;&nbsp;lm&nbsp;=&nbsp;(LinkedHashMap&lt;K,V&gt;)m;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(lm.accessOrder)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lm.modCount++;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remove();&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addBefore(lm.header);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;</p>
<div class="dp-highlighter">
<div class="bar">&nbsp;</div>
<ol class="dp-j">
<li><span><span class="keyword">void</span>&nbsp;addEntry(<span class="keyword">int</span>&nbsp;hash,&nbsp;K&nbsp;key,&nbsp;V&nbsp;value,&nbsp;<span class="keyword">int</span>&nbsp;bucketIndex)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;调用create方法，将新元素以双向链表的的形式加入到映射中。</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;createEntry(hash,&nbsp;key,&nbsp;value,&nbsp;bucketIndex);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;删除最近最少使用元素的策略定义</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;K,V&gt;&nbsp;eldest&nbsp;=&nbsp;header.after;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(removeEldestEntry(eldest))&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;removeEntryForKey(eldest.key);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span>&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(size&nbsp;&gt;=&nbsp;threshold)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resize(<span class="number">2</span>&nbsp;*&nbsp;table.length);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">void</span>&nbsp;createEntry(<span class="keyword">int</span>&nbsp;hash,&nbsp;K&nbsp;key,&nbsp;V&nbsp;value,&nbsp;<span class="keyword">int</span>&nbsp;bucketIndex)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;HashMap.Entry&lt;K,V&gt;&nbsp;old&nbsp;=&nbsp;table[bucketIndex];&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;K,V&gt;&nbsp;e&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;Entry&lt;K,V&gt;(hash,&nbsp;key,&nbsp;value,&nbsp;old);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;table[bucketIndex]&nbsp;=&nbsp;e;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;调用元素的addBrefore方法，将元素加入到哈希、双向链接列表。</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;e.addBefore(header);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;size++;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">private</span>&nbsp;<span class="keyword">void</span>&nbsp;addBefore(Entry&lt;K,V&gt;&nbsp;existingEntry)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;after&nbsp;&nbsp;=&nbsp;existingEntry;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;before&nbsp;=&nbsp;existingEntry.before;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;before.after&nbsp;=&nbsp;<span class="keyword">this</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;after.before&nbsp;=&nbsp;<span class="keyword">this</span>;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;&nbsp;<span>&nbsp;</span></p>
<p><span><span>4) 读取：</span></span></p>
<p>&nbsp;&nbsp; LinkedHashMap重写了父类HashMap的get方法，实际在调用父类getEntry()方法取得查找的元素后，再判断当排序模式accessOrder为true时，记录访问顺序，将最新访问的元素添加到双向链表的表头，并从原来的位置删除。由于的链表的增加、删除操作是常量级的，故并不会带来性能的损失。</p>
<p><span><strong>HashMap.containsValue:</strong></span></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=public%20boolean%20containsValue(Object%20value)%20%7B%0A%09if%20(value%20%3D%3D%20null)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20containsNullValue()%3B%0A%0A%09Entry%5B%5D%20tab%20%3D%20table%3B%0A%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20tab.length%20%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(Entry%20e%20%3D%20tab%5Bi%5D%20%3B%20e%20!%3D%20null%20%3B%20e%20%3D%20e.next)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value.equals(e.value))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%09return%20false%3B%0A%20%20%20%20%7D"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.05475457912704429" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(6).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="keyword">public</span>&nbsp;<span class="keyword">boolean</span>&nbsp;containsValue(Object&nbsp;value)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(value&nbsp;==&nbsp;<span class="keyword">null</span>)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;containsNullValue();&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;Entry[]&nbsp;tab&nbsp;=&nbsp;table;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(<span class="keyword">int</span>&nbsp;i&nbsp;=&nbsp;<span class="number">0</span>;&nbsp;i&nbsp;&lt;&nbsp;tab.length&nbsp;;&nbsp;i++)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(Entry&nbsp;e&nbsp;=&nbsp;tab[i]&nbsp;;&nbsp;e&nbsp;!=&nbsp;<span class="keyword">null</span>&nbsp;;&nbsp;e&nbsp;=&nbsp;e.next)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(value.equals(e.value))&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">true</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">false</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=%20%2F*%E6%9F%A5%E6%89%BEMap%E4%B8%AD%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB%E7%BB%99%E5%AE%9A%E7%9A%84value%EF%BC%8C%E8%BF%98%E6%98%AF%E8%80%83%E8%99%91%E5%88%B0%EF%BC%8CLinkedHashMap%E6%8B%A5%E6%9C%89%E7%9A%84%E5%8F%8C%E9%93%BE%E8%A1%A8%EF%BC%8C%E5%9C%A8%E8%BF%99%E9%87%8COverride%E6%98%AF%E4%B8%BA%E4%BA%86%E6%8F%90%E9%AB%98%E8%BF%AD%E4%BB%A3%E7%9A%84%E6%95%88%E7%8E%87%E3%80%82%0A%20*%2F%0Apublic%20boolean%20containsValue(Object%20value)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Overridden%20to%20take%20advantage%20of%20faster%20iterator%0A%20%20%20%20%20%20%20%20if%20(value%3D%3Dnull)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(Entry%20e%20%3D%20header.after%3B%20e%20!%3D%20header%3B%20e%20%3D%20e.after)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.value%3D%3Dnull)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(Entry%20e%20%3D%20header.after%3B%20e%20!%3D%20header%3B%20e%20%3D%20e.after)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value.equals(e.value))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.777827936219964" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(7).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span>&nbsp;<span class="comment">/*查找Map中是否包含给定的value，还是考虑到，LinkedHashMap拥有的双链表，在这里Override是为了提高迭代的效率。</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li><span><span class="keyword">public</span>&nbsp;<span class="keyword">boolean</span>&nbsp;containsValue(Object&nbsp;value)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Overridden&nbsp;to&nbsp;take&nbsp;advantage&nbsp;of&nbsp;faster&nbsp;iterator</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(value==<span class="keyword">null</span>)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(Entry&nbsp;e&nbsp;=&nbsp;header.after;&nbsp;e&nbsp;!=&nbsp;header;&nbsp;e&nbsp;=&nbsp;e.after)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(e.value==<span class="keyword">null</span>)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">true</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span>&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(Entry&nbsp;e&nbsp;=&nbsp;header.after;&nbsp;e&nbsp;!=&nbsp;header;&nbsp;e&nbsp;=&nbsp;e.after)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(value.equals(e.value))&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">true</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">false</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=%2F*%E8%AF%A5transfer()%E6%98%AFHashMap%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%9A%E9%81%8D%E5%8E%86%E6%95%B4%E4%B8%AA%E8%A1%A8%E7%9A%84%E5%90%84%E4%B8%AA%E6%A1%B6%E4%BD%8D%EF%BC%8C%E7%84%B6%E5%90%8E%E5%AF%B9%E6%A1%B6%E8%BF%9B%E8%A1%8C%E9%81%8D%E5%8E%86%E5%BE%97%E5%88%B0%E6%AF%8F%E4%B8%80%E4%B8%AAEntry%EF%BC%8C%E9%87%8D%E6%96%B0hash%E5%88%B0newTable%E4%B8%AD%EF%BC%8C%0A%20%2F%2F%E6%94%BE%E5%9C%A8%E8%BF%99%E9%87%8C%E6%98%AF%E4%B8%BA%E4%BA%86%E5%92%8C%E4%B8%8B%E9%9D%A2LinkedHashMap%E9%87%8D%E5%86%99%E8%AF%A5%E6%B3%95%E7%9A%84%E6%AF%94%E8%BE%83%EF%BC%8C%0A%20void%20transfer(Entry%5B%5D%20newTable)%20%7B%0A%20%20%20%20%20%20%20%20Entry%5B%5D%20src%20%3D%20table%3B%0A%20%20%20%20%20%20%20%20int%20newCapacity%20%3D%20newTable.length%3B%0A%20%20%20%20%20%20%20%20for%20(int%20j%20%3D%200%3B%20j%20%3C%20src.length%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Entry%3CK%2CV%3E%20e%20%3D%20src%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(e%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20src%5Bj%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Entry%3CK%2CV%3E%20next%20%3D%20e.next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20i%20%3D%20indexFor(e.hash%2C%20newCapacity)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.next%20%3D%20newTable%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newTable%5Bi%5D%20%3D%20e%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20while%20(e%20!%3D%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20*%2F%0A%0A%20%2F**%0A%20*transfer()%E6%96%B9%E6%B3%95%E6%98%AF%E5%85%B6%E7%88%B6%E7%B1%BBHashMap%E8%B0%83%E7%94%A8resize()%E7%9A%84%E6%97%B6%E5%80%99%E8%B0%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E8%A1%A8%E6%89%A9%E5%AE%B9%E5%90%8E%EF%BC%8C%E6%8A%8A%E6%97%A7%E8%A1%A8%E4%B8%AD%E7%9A%84key%E9%87%8D%E6%96%B0hash%E5%88%B0%E6%96%B0%E7%9A%84%E8%A1%A8%E4%B8%AD%E3%80%82%0A%20*%E8%BF%99%E9%87%8C%E4%BB%8E%E5%86%99%E4%BA%86%E7%88%B6%E7%B1%BBHashMap%E4%B8%AD%E7%9A%84%E8%AF%A5%E6%96%B9%E6%B3%95%EF%BC%8C%E6%98%AF%E5%9B%A0%E4%B8%BA%E8%80%83%E8%99%91%E5%88%B0%EF%BC%8CLinkedHashMap%E6%8B%A5%E6%9C%89%E7%9A%84%E5%8F%8C%E9%93%BE%E8%A1%A8%EF%BC%8C%E5%9C%A8%E8%BF%99%E9%87%8COverride%E6%98%AF%E4%B8%BA%E4%BA%86%E6%8F%90%E9%AB%98%E8%BF%AD%E4%BB%A3%E7%9A%84%E6%95%88%E7%8E%87%E3%80%82%0A%20*%2F%0A%20void%20transfer(HashMap.Entry%5B%5D%20newTable)%20%7B%0A%20%20%20int%20newCapacity%20%3D%20newTable.length%3B%0A%20%20%20for%20(Entry%3CK%2C%20V%3E%20e%20%3D%20header.after%3B%20e%20!%3D%20header%3B%20e%20%3D%20e.after)%20%7B%0A%20%20%20%20%20int%20index%20%3D%20indexFor(e.hash%2C%20newCapacity)%3B%0A%20%20%20%20%20e.next%20%3D%20newTable%5Bindex%5D%3B%0A%20%20%20%20%20newTable%5Bindex%5D%20%3D%20e%3B%0A%20%20%20%7D%0A%20%7D"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.4400194537906639" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(8).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="comment">/*该transfer()是HashMap中的实现：遍历整个表的各个桶位，然后对桶进行遍历得到每一个Entry，重新hash到newTable中，</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;//放在这里是为了和下面LinkedHashMap重写该法的比较，</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;void&nbsp;transfer(Entry[]&nbsp;newTable)&nbsp;{</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entry[]&nbsp;src&nbsp;=&nbsp;table;</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;newCapacity&nbsp;=&nbsp;newTable.length;</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;src.length;&nbsp;j++)&nbsp;{</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;K,V&gt;&nbsp;e&nbsp;=&nbsp;src[j];</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(e&nbsp;!=&nbsp;null)&nbsp;{</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;src[j]&nbsp;=&nbsp;null;</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;{</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;K,V&gt;&nbsp;next&nbsp;=&nbsp;e.next;</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;indexFor(e.hash,&nbsp;newCapacity);</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.next&nbsp;=&nbsp;newTable[i];</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newTable[i]&nbsp;=&nbsp;e;</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e&nbsp;=&nbsp;next;</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;while&nbsp;(e&nbsp;!=&nbsp;null);</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;<span class="comment">/**</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*transfer()方法是其父类HashMap调用resize()的时候调用的方法，它的作用是表扩容后，把旧表中的key重新hash到新的表中。</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*这里从写了父类HashMap中的该方法，是因为考虑到，LinkedHashMap拥有的双链表，在这里Override是为了提高迭代的效率。</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;<span class="keyword">void</span>&nbsp;transfer(HashMap.Entry[]&nbsp;newTable)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;<span class="keyword">int</span>&nbsp;newCapacity&nbsp;=&nbsp;newTable.length;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(Entry&lt;K,&nbsp;V&gt;&nbsp;e&nbsp;=&nbsp;header.after;&nbsp;e&nbsp;!=&nbsp;header;&nbsp;e&nbsp;=&nbsp;e.after)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span>&nbsp;index&nbsp;=&nbsp;indexFor(e.hash,&nbsp;newCapacity);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.next&nbsp;=&nbsp;newTable[index];&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newTable[index]&nbsp;=&nbsp;e;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>&nbsp;}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">public</span>&nbsp;V&nbsp;get(Object&nbsp;key)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;调用父类HashMap的getEntry()方法，取得要查找的元素。</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;K,V&gt;&nbsp;e&nbsp;=&nbsp;(Entry&lt;K,V&gt;)getEntry(key);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(e&nbsp;==&nbsp;<span class="keyword">null</span>)&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">null</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;记录访问顺序。</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;e.recordAccess(<span class="keyword">this</span>);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;e.value;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">void</span>&nbsp;recordAccess(HashMap&lt;K,V&gt;&nbsp;m)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;LinkedHashMap&lt;K,V&gt;&nbsp;lm&nbsp;=&nbsp;(LinkedHashMap&lt;K,V&gt;)m;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果定义了LinkedHashMap的迭代顺序为访问顺序，</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;则删除以前位置上的元素，并将最新访问的元素添加到链表表头。</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(lm.accessOrder)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lm.modCount++;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remove();&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addBefore(lm.header);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=%2F**%0A%20%20%20%20%20%20%20%20%20*%20Removes%20this%20entry%20from%20the%20linked%20list.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20private%20void%20remove()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20before.after%20%3D%20after%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20after.before%20%3D%20before%3B%0A%20%20%20%20%20%20%20%20%7D"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.12529640266530762" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(9).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="comment">/**</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Removes&nbsp;this&nbsp;entry&nbsp;from&nbsp;the&nbsp;linked&nbsp;list.</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;<span class="keyword">void</span>&nbsp;remove()&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;before.after&nbsp;=&nbsp;after;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;after.before&nbsp;=&nbsp;before;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;<object width="14" height="15" data="./理解LinkedHashMap - children - 博客园_files/clipboard_new.swf.download" type="application/x-shockwave-flash"><param name="src" value="http://uule.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf"><param name="wmode" value="transparent"><param name="flashvars" value="clipboard=%20%2F**clear%E9%93%BE%E8%A1%A8%EF%BC%8C%E8%AE%BE%E7%BD%AEheader%E4%B8%BA%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81*%2F%0A%20public%20void%20clear()%20%7B%0A%20%20super.clear()%3B%0A%20%20header.before%20%3D%20header.after%20%3D%20header%3B%0A%20%7D"><param name="quality" value="high"><param name="allowscriptaccess" value="always"><param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer"></object>&nbsp;<a title="收藏这段代码" href="http://uule.iteye.com/blog/1522291"><iframe id="iframe_0.5040909882015798" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(10).html" style="border: none; width: 0px; height: 0px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j" start="1">
<li><span><span class="comment">/**clear链表，设置header为初始状态*/</span>&nbsp;&nbsp;</span></li>
<li><span><span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;clear()&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;<span class="keyword">super</span>.clear();&nbsp;&nbsp;</span></li>
<li><span>&nbsp;header.before&nbsp;=&nbsp;header.after&nbsp;=&nbsp;header;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
&nbsp;
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;<span>&nbsp;5) 排序模式：</span></p>
<p>&nbsp;&nbsp; LinkedHashMap定义了排序模式accessOrder，该属性为boolean型变量，对于访问顺序，为true；对于插入顺序，则为false。</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">private</span>&nbsp;<span class="keyword">final</span>&nbsp;<span class="keyword">boolean</span>&nbsp;accessOrder;&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;一般情况下，不必指定排序模式，其迭代顺序即为默认为插入顺序。看LinkedHashMap的构造方法，如：</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">public</span>&nbsp;LinkedHashMap(<span class="keyword">int</span>&nbsp;initialCapacity,&nbsp;<span class="keyword">float</span>&nbsp;loadFactor)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">super</span>(initialCapacity,&nbsp;loadFactor);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;accessOrder&nbsp;=&nbsp;<span class="keyword">false</span>;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;&nbsp;&nbsp; 这些构造方法都会默认指定排序模式为插入顺序。如果你想构造一个LinkedHashMap，并打算按从近期访问最少到近期访问最多的顺序（即访问顺序）来保存元素，那么请使用下面的构造方法构造LinkedHashMap：</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">public</span>&nbsp;LinkedHashMap(<span class="keyword">int</span>&nbsp;initialCapacity,&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">float</span>&nbsp;loadFactor,&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">boolean</span>&nbsp;accessOrder)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">super</span>(initialCapacity,&nbsp;loadFactor);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.accessOrder&nbsp;=&nbsp;accessOrder;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;&nbsp;&nbsp; 该哈希映射的迭代顺序就是最后访问其条目的顺序，这种映射很适合构建LRU缓存。LinkedHashMap提供了removeEldestEntry(Map.Entry&lt;K,V&gt; eldest)方法。该方法可以提供在每次添加新条目时移除最旧条目的实现程序，默认返回false，这样，此映射的行为将类似于正常映射，即永远不能移除最旧的元素。</p>
<p>&nbsp;</p>
<p>当有新元素加入Map的时候会调用Entry的addEntry方法，会调用removeEldestEntry方法，这里就是实现LRU元素过期机制的地方，默认的情况下removeEldestEntry方法只返回false表示元素永远不过期。</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp; &nbsp;<a title="收藏这段代码" href="http://woming66.iteye.com/blog/1284326"><iframe id="iframe_0.7035630560113464" src="./理解LinkedHashMap - children - 博客园_files/saved_resource(11).html" style="border: none; width: 15px; height: 14px;" frameborder="0" scrolling="no"></iframe></a></div>

</div>
<ol class="dp-j">
<li><span>&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;override&nbsp;alters&nbsp;behavior&nbsp;of&nbsp;superclass&nbsp;put&nbsp;method.&nbsp;It&nbsp;causes&nbsp;newly</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;allocated&nbsp;entry&nbsp;to&nbsp;get&nbsp;inserted&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;linked&nbsp;list&nbsp;and</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;removes&nbsp;the&nbsp;eldest&nbsp;entry&nbsp;if&nbsp;appropriate.</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;<span class="keyword">void</span>&nbsp;addEntry(<span class="keyword">int</span>&nbsp;hash,&nbsp;K&nbsp;key,&nbsp;V&nbsp;value,&nbsp;<span class="keyword">int</span>&nbsp;bucketIndex)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createEntry(hash,&nbsp;key,&nbsp;value,&nbsp;bucketIndex);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Remove&nbsp;eldest&nbsp;entry&nbsp;if&nbsp;instructed,&nbsp;else&nbsp;grow&nbsp;capacity&nbsp;if&nbsp;appropriate</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;K,V&gt;&nbsp;eldest&nbsp;=&nbsp;header.after;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(removeEldestEntry(eldest))&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;removeEntryForKey(eldest.key);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span>&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(size&nbsp;&gt;=&nbsp;threshold)&nbsp;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resize(<span class="number">2</span>&nbsp;*&nbsp;table.length);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;override&nbsp;differs&nbsp;from&nbsp;addEntry&nbsp;in&nbsp;that&nbsp;it&nbsp;doesn't&nbsp;resize&nbsp;the</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;table&nbsp;or&nbsp;remove&nbsp;the&nbsp;eldest&nbsp;entry.</span>&nbsp;</span></li>
<li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;<span class="keyword">void</span>&nbsp;createEntry(<span class="keyword">int</span>&nbsp;hash,&nbsp;K&nbsp;key,&nbsp;V&nbsp;value,&nbsp;<span class="keyword">int</span>&nbsp;bucketIndex)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap.Entry&lt;K,V&gt;&nbsp;old&nbsp;=&nbsp;table[bucketIndex];&nbsp;&nbsp;</span></li>
<li><span>Entry&lt;K,V&gt;&nbsp;e&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;Entry&lt;K,V&gt;(hash,&nbsp;key,&nbsp;value,&nbsp;old);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table[bucketIndex]&nbsp;=&nbsp;e;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.addBefore(header);&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size++;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;<span class="keyword">protected</span>&nbsp;<span class="keyword">boolean</span>&nbsp;removeEldestEntry(Map.Entry&lt;K,V&gt;&nbsp;eldest)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">false</span>;&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>

</ol></div>
<p>此方法通常不以任何方式修改映射，相反允许映射在其返回值的指引下进行自我修改。如果用此映射构建LRU缓存，则非常方便，它允许映射通过删除旧条目来减少内存损耗。</p>
<p>&nbsp;&nbsp; 例如：重写此方法，维持此映射只保存100个条目的稳定状态，在每次添加新条目时删除最旧的条目。</p>
<div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;</div>

</div>
<ol class="dp-j">
<li><span><span class="keyword">private</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">final</span>&nbsp;<span class="keyword">int</span>&nbsp;MAX_ENTRIES&nbsp;=&nbsp;<span class="number">100</span>;&nbsp;&nbsp;</span></li>
<li><span><span class="keyword">protected</span>&nbsp;<span class="keyword">boolean</span>&nbsp;removeEldestEntry(Map.Entry&nbsp;eldest)&nbsp;{&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;size()&nbsp;&gt;&nbsp;MAX_ENTRIES;&nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li>

</ol></div>
<p>&nbsp;来源：<a href="http://zhangshixi.iteye.com/blog/673789">http://zhangshixi.iteye.com/blog/673789</a></p>
<p>参考：<a href="http://hi.baidu.com/yao1111yao/blog/item/3043e2f5657191f07709d7bb.html">http://hi.baidu.com/yao1111yao/blog/item/3043e2f5657191f07709d7bb.html</a></p>
<p>部分修改。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>使用LinkedHashMap构建LRU的Cache</p>
<p><a href="http://tomyz0223.iteye.com/blog/1035686">http://tomyz0223.iteye.com/blog/1035686</a></p>
<p>基于LinkedHashMap实现LRU缓存调度算法原理及应用</p>
<p><a href="http://woming66.iteye.com/blog/1284326">http://woming66.iteye.com/blog/1284326</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span>其实LinkedHashMap几乎和HashMap一样，不同的是它定义了一个Entry&lt;K,V&gt; header，这个header不是放在Table里，它是额外独立出来的。LinkedHashMap通过继承hashMap中的Entry&lt;K,V&gt;,并添加两个属性Entry&lt;K,V&gt; &nbsp;before,after,和header结合起来组成一个双向链表，来实现按插入顺序或访问顺序排序。</span></p>

</div></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="http://www.cnblogs.com/children/category/281052.html" target="_blank">java</a></div>
<div id="EntryTag"></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(2710624,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;f0af284c-c57c-de11-be36-001cf0cd104b&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./理解LinkedHashMap - children - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./理解LinkedHashMap - children - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/children/" target="_blank"><img src="./理解LinkedHashMap - children - 博客园_files/sample_face.gif" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/children/">children</a><br>
            <a href="http://home.cnblogs.com/u/children/followees">关注 - 0</a><br>
            <a href="http://home.cnblogs.com/u/children/followers">粉丝 - 9</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;f0af284c-c57c-de11-be36-001cf0cd104b&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(2710624,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">6</span>
    </div>
    <div class="buryit" onclick="votePost(2710624,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
</div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/children/archive/2012/10/02/2710464.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/children/archive/2012/10/02/2710464.html" title="发布于2012-10-02 18:05">理解HashMap</a><br><a href="http://www.cnblogs.com/children/archive/2012/10/04/2711614.html" class="p_n_p_prefix">» </a> 下一篇：<a href="http://www.cnblogs.com/children/archive/2012/10/04/2711614.html" title="发布于2012-10-04 18:31">父类 子类 调用 考点</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2012-10-02 23:17</span> <a href="http://www.cnblogs.com/children/">children</a> 阅读(<span id="post_view_count">57807</span>) 评论(<span id="post_comment_count">2</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=2710624" rel="nofollow">编辑</a> <a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html#" onclick="AddToWz(2710624);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=59100,cb_entryId=2710624,cb_blogApp=currentBlogApp,cb_blogUserGuid='f0af284c-c57c-de11-be36-001cf0cd104b',cb_entryCreatedDate='2012/10/2 23:17:00';loadViewCount(cb_entryId);</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<!--done-->
<div class="feedback_area_title">评论列表</div>
<div class="feedbackNoItems"></div>
	

		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html#3409456" class="layer">#1楼</a><a name="3409456" id="comment_anchor_3409456"></a>  <span class="comment_date">2016-04-15 20:43</span> <a id="a_comment_author_3409456" href="http://www.cnblogs.com/hiter-cc/" target="_blank">caoyuanyuan</a> <a href="http://msg.cnblogs.com/send/caoyuanyuan" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_3409456" class="blog_comment_body">讲的很详细</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3409456,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3409456,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3409456_avatar" style="display:none;">http://pic.cnblogs.com/face/392794/20160317085004.png</span>
			</div>
		</div>
	
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html#3519387" class="layer">#2楼</a><a name="3519387" id="comment_anchor_3519387"></a><span id="comment-maxId" style="display:none;">3519387</span><span id="comment-maxDate" style="display:none;">2016/9/26 9:52:41</span>  <span class="comment_date">2016-09-26 09:52</span> <a id="a_comment_author_3519387" href="http://www.cnblogs.com/dingwmz/" target="_blank">dw每天坚持学习mz</a> <a href="http://msg.cnblogs.com/send/dw%E6%AF%8F%E5%A4%A9%E5%9D%9A%E6%8C%81%E5%AD%A6%E4%B9%A0mz" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_3519387" class="blog_comment_body">讲的非常详细，明了，好文章</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3519387,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3519387,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
		</div>
	<div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html#" onclick="return RefreshPage();">刷新页面</a><a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="http://vcloud.163.com/?adchannel=bp_cnblogs2" target="_blank">【推荐】用1%的研发投入，搭载3倍性能的网易视频云技术</a><br><a href="http://rongcloud.cn/reports/journal2" target="_blank">【推荐】融云发布 App 社交化白皮书 IM 提升活跃超 8 倍</a><br><a href="http://group.cnblogs.com/topic/75805.html" target="_blank">【红包】阿里云双11红包：答题抽奖，100%中，赢10元~1111元红包</a><br></div>
<div id="opt_under_post"></div>
<div id="ad_c1" class="c_ad_block"><a href="http://www.gcpowertools.com.cn/products/spreadjs/?utm_source=cnblogs&amp;utm_medium=blogpage&amp;utm_term=bottom&amp;utm_content=SpreadJS&amp;utm_campaign=community" target="_blank"><img width="300" height="250" src="./理解LinkedHashMap - children - 博客园_files/24442-20161031104652361-1905759806.gif" alt=""></a></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="http://news.cnblogs.com/n/556982/" target="_blank">马云18年没拿过1分钱工资：对钱没兴趣</a><br> ·  <a href="http://news.cnblogs.com/n/556981/" target="_blank">吴晓波：乐视标榜的“生态化反”成了贾跃亭给自己出的难题</a><br> ·  <a href="http://news.cnblogs.com/n/556980/" target="_blank">Facebook Messenger测试一项基于话题展开的群聊功能</a><br> ·  <a href="http://news.cnblogs.com/n/556979/" target="_blank">饿了么进军物流 你的快递正由外卖小哥配送</a><br> ·  <a href="http://news.cnblogs.com/n/556978/" target="_blank">雷军内部信大赞小米双11战绩：干得漂亮</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="ad_c2" class="c_ad_block"><a href="https://www.jiguang.cn/devservice/?from=cnblogs01" target="_blank"><img width="468" height="60" src="./理解LinkedHashMap - children - 博客园_files/24442-20161011141820868-1378717477.jpg" alt=""></a></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/555750/" target="_blank">循序渐进地代码重构</a><br> ·  <a href="http://kb.cnblogs.com/page/554496/" target="_blank">技术的正宗与野路子</a><br> ·  <a href="http://kb.cnblogs.com/page/553682/" target="_blank">陈皓：什么是工程师文化？</a><br> ·  <a href="http://kb.cnblogs.com/page/551422/" target="_blank">没那么难，谈CSS的设计模式</a><br> ·  <a href="http://kb.cnblogs.com/page/550625/" target="_blank">程序猿媳妇儿注意事项</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
			<div id="calendar"><div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">

<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_categories">
<div class="catListPostCategory">
<h3 class="catListTitle">随笔分类</h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="http://www.cnblogs.com/children/category/281630.html">.net(5)</a> </li>

<li><a id="CatList_LinkList_0_Link_1" href="http://www.cnblogs.com/children/category/446404.html">apache(5)</a> </li>

<li><a id="CatList_LinkList_0_Link_2" href="http://www.cnblogs.com/children/category/391615.html">awk(7)</a> </li>

<li><a id="CatList_LinkList_0_Link_3" href="http://www.cnblogs.com/children/category/353966.html">c(5)</a> </li>

<li><a id="CatList_LinkList_0_Link_4" href="http://www.cnblogs.com/children/category/203477.html">C++(14)</a> </li>

<li><a id="CatList_LinkList_0_Link_5" href="http://www.cnblogs.com/children/category/446531.html">chrome(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_6" href="http://www.cnblogs.com/children/category/440934.html">debian(7)</a> </li>

<li><a id="CatList_LinkList_0_Link_7" href="http://www.cnblogs.com/children/category/471102.html">Django(2)</a> </li>

<li><a id="CatList_LinkList_0_Link_8" href="http://www.cnblogs.com/children/category/240523.html">eclipse(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_9" href="http://www.cnblogs.com/children/category/440079.html">FreeBSD(7)</a> </li>

<li><a id="CatList_LinkList_0_Link_10" href="http://www.cnblogs.com/children/category/279887.html">Hadoop(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_11" href="http://www.cnblogs.com/children/category/243961.html">Hibernate(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_12" href="http://www.cnblogs.com/children/category/281052.html">java(10)</a> </li>

<li><a id="CatList_LinkList_0_Link_13" href="http://www.cnblogs.com/children/category/309030.html">jQuery(3)</a> </li>

<li><a id="CatList_LinkList_0_Link_14" href="http://www.cnblogs.com/children/category/448246.html">Keepalived(2)</a> </li>

<li><a id="CatList_LinkList_0_Link_15" href="http://www.cnblogs.com/children/category/372665.html">Linux(13)</a> </li>

<li><a id="CatList_LinkList_0_Link_16" href="http://www.cnblogs.com/children/category/365251.html">Mysql(6)</a> </li>

<li><a id="CatList_LinkList_0_Link_17" href="http://www.cnblogs.com/children/category/390590.html">nagios(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_18" href="http://www.cnblogs.com/children/category/346703.html">netbeans(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_19" href="http://www.cnblogs.com/children/category/306002.html">office(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_20" href="http://www.cnblogs.com/children/category/202401.html">Oracle(3)</a> </li>

<li><a id="CatList_LinkList_0_Link_21" href="http://www.cnblogs.com/children/category/433569.html">python(4)</a> </li>

<li><a id="CatList_LinkList_0_Link_22" href="http://www.cnblogs.com/children/category/441815.html">shell(5)</a> </li>

<li><a id="CatList_LinkList_0_Link_23" href="http://www.cnblogs.com/children/category/243976.html">Spring(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_24" href="http://www.cnblogs.com/children/category/202289.html">SQL Server 2005(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_25" href="http://www.cnblogs.com/children/category/452197.html">vim(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_26" href="http://www.cnblogs.com/children/category/357775.html">二进制(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_27" href="http://www.cnblogs.com/children/category/365186.html">数据库(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_28" href="http://www.cnblogs.com/children/category/388154.html">网络(2)</a> </li>

</ul>

</div>

<div class="catListPostArchive">
<h3 class="catListTitle">随笔档案</h3>

<ul>

<li><a id="CatList_LinkList_1_Link_0" href="http://www.cnblogs.com/children/archive/2014/04.html">2014年4月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_1" href="http://www.cnblogs.com/children/archive/2014/03.html">2014年3月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_2" href="http://www.cnblogs.com/children/archive/2013/12.html">2013年12月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_3" href="http://www.cnblogs.com/children/archive/2013/11.html">2013年11月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_4" href="http://www.cnblogs.com/children/archive/2013/10.html">2013年10月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_5" href="http://www.cnblogs.com/children/archive/2013/09.html">2013年9月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_6" href="http://www.cnblogs.com/children/archive/2013/08.html">2013年8月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_7" href="http://www.cnblogs.com/children/archive/2013/04.html">2013年4月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_8" href="http://www.cnblogs.com/children/archive/2013/03.html">2013年3月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_9" href="http://www.cnblogs.com/children/archive/2013/02.html">2013年2月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_10" href="http://www.cnblogs.com/children/archive/2013/01.html">2013年1月 (8)</a> </li>

<li><a id="CatList_LinkList_1_Link_11" href="http://www.cnblogs.com/children/archive/2012/12.html">2012年12月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_12" href="http://www.cnblogs.com/children/archive/2012/11.html">2012年11月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_13" href="http://www.cnblogs.com/children/archive/2012/10.html">2012年10月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_14" href="http://www.cnblogs.com/children/archive/2012/09.html">2012年9月 (5)</a> </li>

<li><a id="CatList_LinkList_1_Link_15" href="http://www.cnblogs.com/children/archive/2012/08.html">2012年8月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_16" href="http://www.cnblogs.com/children/archive/2012/07.html">2012年7月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_17" href="http://www.cnblogs.com/children/archive/2012/06.html">2012年6月 (11)</a> </li>

<li><a id="CatList_LinkList_1_Link_18" href="http://www.cnblogs.com/children/archive/2012/05.html">2012年5月 (9)</a> </li>

<li><a id="CatList_LinkList_1_Link_19" href="http://www.cnblogs.com/children/archive/2012/04.html">2012年4月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_20" href="http://www.cnblogs.com/children/archive/2012/03.html">2012年3月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_21" href="http://www.cnblogs.com/children/archive/2012/02.html">2012年2月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_22" href="http://www.cnblogs.com/children/archive/2011/12.html">2011年12月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_23" href="http://www.cnblogs.com/children/archive/2011/07.html">2011年7月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_24" href="http://www.cnblogs.com/children/archive/2011/06.html">2011年6月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_25" href="http://www.cnblogs.com/children/archive/2011/03.html">2011年3月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_26" href="http://www.cnblogs.com/children/archive/2011/01.html">2011年1月 (5)</a> </li>

<li><a id="CatList_LinkList_1_Link_27" href="http://www.cnblogs.com/children/archive/2010/05.html">2010年5月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_28" href="http://www.cnblogs.com/children/archive/2010/04.html">2010年4月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_29" href="http://www.cnblogs.com/children/archive/2009/08.html">2009年8月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_30" href="http://www.cnblogs.com/children/archive/2009/07.html">2009年7月 (2)</a> </li>

</ul>

</div>

</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<div class="catListComment">
<h3 class="catListTitle">最新评论</h3>
	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html#3519387">1. Re:理解LinkedHashMap</a></li>
        <li class="recent_comment_body">讲的非常详细，明了，好文章</li>
        <li class="recent_comment_author">--dw每天坚持学习mz</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html#3409456">2. Re:理解LinkedHashMap</a></li>
        <li class="recent_comment_body">讲的很详细</li>
        <li class="recent_comment_author">--caoyuanyuan</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/children/archive/2012/08/08/2628912.html#2978820">3. Re:c++面试题</a></li>
        <li class="recent_comment_body">面试题大全 <a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html" target="_blank"></a></li>
        <li class="recent_comment_author">--cppentry</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html">1. 理解LinkedHashMap(57808)</a></li><li><a href="http://www.cnblogs.com/children/archive/2012/05/15/2501946.html">2. c++中的输入输出方法(15402)</a></li><li><a href="http://www.cnblogs.com/children/archive/2013/02/14/2911304.html">3. 将VIM打造为python IDE(8529)</a></li><li><a href="http://www.cnblogs.com/children/archive/2011/07/09/2101756.html">4. jQuery 选择器语法(7710)</a></li><li><a href="http://www.cnblogs.com/children/archive/2012/08/13/2636956.html">5. 析构函数定义为虚函数原因(7018)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"><ul><li><a href="http://www.cnblogs.com/children/archive/2012/10/02/2710624.html">1. 理解LinkedHashMap(2)</a></li><li><a href="http://www.cnblogs.com/children/archive/2012/08/08/2628912.html">2. c++面试题(1)</a></li></ul></div>
</div>
</div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright ©2016 children
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


</body></html>